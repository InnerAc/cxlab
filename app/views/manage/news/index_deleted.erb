<div class="page-header">
  <h1>资讯管理</h1>
</div>
<ul class="nav nav-tabs" role="tablist">
  <li ><%= link_to '草稿箱', manage_news_index_draft_path %></li>
  <li><%= link_to '已经发布的资讯', manage_news_index_path%></li>
  <li class="active"><%= link_to '回收箱', manage_news_index_deleted_path %></li>
</ul>

<br>
<% @manage_news.each do |manage_news| %>
  <% panel_style = "primary" %>
  <%= bs_panel title: manage_news.title ,style:panel_style,footer:"发布人：#{manage_news.author if manage_news.admin}" do %>
    <br>
    <table class="table">
      <tr>
        <td><%= tmc 'contest_id' %></td>
        <td><%= manage_news.contest %></td>
      </tr>
      <tr>
        <td><%= tmc 'publish_at' %></td>
        <td><%= manage_news.publish_at %></td>
      </tr>
      <tr>
        <td>操作</td>
        <td>
          <!-- 发布与放入回收箱功能还未实现 -->
          <%= link_to '发布', manage_news_publish_url(manage_news), method: :delete,class:"btn btn-success" %>
          <%= link_to '详情', manage_news,class:"btn btn-info" %>
          <%= link_to '编辑', edit_manage_news_path(manage_news),class:"btn btn-warning" %>
          <%= link_to '放入草稿箱', manage_news_draft_url(manage_news), method: :delete,class:"btn btn-warning" %>
          <%= link_to '删除', manage_news, method: :delete, data: { confirm: t('confirm_delete') },class:"btn btn-danger" %>
        </td> 
      </tr>
    </table>
  <% end %>
<% end %>
<br>
<pre>
  注意：
    草稿箱放置is_draft为true的所有文章，回收箱放置is_deleted为true的文章
    另外，草稿箱里面，文章的现实格式应当是与比赛管理类似的，要能预览一部分信息
    其他两个就直接用表格好了。
    
    字段中，pure_content不需要用户输入，在内容提交时需要自动清除所有tag，清除的方法是：
    str.gsub(/<\/?.*?>/,"").gsub(/&\w+;/," ").gsub(/\s+/," ")
    content字段请使用 f.kindeditor  来生成编辑器，可以参考比赛管理中的表单。

    contest需要你从contest表中读出所有contest的名字（只选择name和id字段，不要把其他信息读出来），然后生成一个列表框。传送的参数只有id。默认值是“系统公告”，id值为空

    admin_id请在读取param时默认赋值，详情参见contest_controller。

    做完基础的事情之后，添加一个搜索框，可以搜索匹配的文章，内容在  author/title/pure_content中寻找
</pre>
<%= link_to '添加新资讯', new_manage_news_path,class:"btn btn-success" %>
